# SAS字符型变量格式定义指南

## 一、字符型变量的输入/输出格式

### 1.1 基本语法结构

-   **输入格式**：`$w.`
-   **输出格式**：`$w.`

> 其中`w`表示字符宽度值，`.`为格式定义的必要符号

### 1.2 使用示例

``` sas
data test;
  input name $10.;  /* 输入时读取10位字符 */
  format name $15.; /* 输出时显示15位字符 */
datalines;
Alice
Bob
;
run;
```

### 1.3 格式说明

| 格式类型 | 示例   | 作用说明             | 显示特性                 |
|----------|--------|----------------------|--------------------------|
| 输入格式 | `$10.` | 读取10字符宽度数据   | 自动截断超长字符         |
| 输出格式 | `$15.` | 输出时保留15字符宽度 | 右对齐，不足位用空格填充 |

## 二、自定义字符型格式（PROC FORMAT）

### 2.1 定义语法

``` sas
proc format;
  value $格式名称
    '原始值1' = '显示值1'
    '原始值2' = '显示值2';
run;
```

### 2.2 应用实例

``` sas
/* 定义格式 */
proc format;
  value $color
    'R' = 'Red'
    'B' = 'Blue';
run;

/* 应用格式 */
data cars;
  input color $;
  format color $color.;
datalines;
R
B
;
run;
```

### 2.3 运行结果

| 原始值 | 格式化显示 |
|--------|------------|
| R      | Red        |
| B      | Blue       |

## 三、核心语法要素说明

### 3.1 符号作用

-   **`$`** 的作用：
    -   标识字符型变量
    -   声明字符型格式
-   **`.`** 的作用：
    -   格式定义的必需终止符
    -   必须保留，即使省略宽度值（如`$color.`）

### 3.2 宽度值规则

| 格式类型     | 示例      | 宽度说明                  |
|--------------|-----------|---------------------------|
| 默认格式     | `$`       | 使用系统默认宽度（8字符） |
| 指定宽度格式 | `$20.`    | 严格按指定宽度处理        |
| 自定义格式   | `$color.` | 宽度由格式定义内容决定    |

### 3.3 特殊注意事项

1.  输入宽度不足时：
    -   自动截断右侧超长字符
    -   保留指定宽度前的字符内容
2.  输出宽度超长时：
    -   数值型变量：左对齐显示
    -   字符型变量：右对齐显示
    -   空余位自动填充空格
